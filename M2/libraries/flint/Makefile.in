HOMEPAGE = http://flintlib.org
#URL = http://flintlib.org
URL = http://www.math.uiuc.edu/Macaulay2/Downloads/OtherSourceCode
VERSION = 2.4.5
# PATCHFILE = @abs_srcdir@/patch-$(VERSION)
PARALLEL = yes
# The patch file disables some tests that need too much memory, but
# many other tests keep failing, so disable themm all:
CHECKTARGET = .

ifeq ("@ISSUE@",MINGW64)
LIB_DIR = /mingw64
else
LIB_DIR = $(LIBRARIESDIR)
endif

LICENSEFILES = flint.h gpl-2.0.txt

ifeq (@DEBUG@,yes)
CONFIGOPTIONS += --enable-assert
CFLAGS += -O0 -fno-unroll-loops 
endif

CONFIGURECMD =  LIB_DIRS=$(LIBRARIESDIR)/lib ./configure --disable-tls --prefix='$(PREFIX)' --disable-shared
CONFIGURECMD += CC='$(CC)' CFLAGS='$(CPPFLAGS) $(CFLAGS)'
CONFIGURECMD +=	--with-gmp=$(LIB_DIR) --with-mpfr=$(LIB_DIR) --with-blas=$(LIB_DIR) --with-gc=$(LIB_DIR)

# The with-gmp and with-mpfr options above are barely used by the configure script: the directory given should contain a subdirectory "lib"; that's all.
include ../Makefile.library
Makefile: @srcdir@/Makefile.in ; cd ../.. && ./config.status libraries/flint/Makefile
# Local Variables:
# mode: makefile-gmake
# compile-command: "make -C $M2BUILDDIR/libraries/flint "
# End:
